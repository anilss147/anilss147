name: ðŸš€ Auto-Update README_2.md Monthly

on:
  schedule:
    - cron: "0 0 1 * *"  # Every 1st of the month
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v3

      - name: ðŸ Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: ðŸ§  Install PyGithub
        run: pip install PyGithub

      - name: ðŸ“ Generate README_2.md
        run: |
          echo "from github import Github
import os

USERNAME = 'anilss147'
g = Github()
user = g.get_user(USERNAME)
repos = user.get_repos()

project_lines = []
for i, repo in enumerate(sorted(repos, key=lambda r: r.created_at, reverse=True), start=1):
    line = f'{i}. [{repo.name}]({repo.html_url}) - {repo.description or \"No description.\"}'
    project_lines.append(line)

project_section = '\\n'.join(project_lines[:30])

readme_content = f\"\"\"# ðŸš€ Auto-Generated README_2.md

## ðŸ‘‹ Hello, I'm Anil Sherikar!

ðŸš€ Developer | AI Enthusiast | Automation Expert

---

## ðŸš€ Dynamic Projects

{project_section}

---

## ðŸ“¢ Auto-updated on GitHub Actions
\"\"\"

with open('README_2.md', 'w', encoding='utf-8') as f:
    f.write(readme_content)
" > generate.py
          python generate.py

      - name: ðŸ“¦ Commit & Push if README_2.md Changed
        run: |
          git config --global user.name "anilss147"
          git config --global user.email "anil@example.com"

          if [[ `git status --porcelain README_2.md` ]]; then
            git add README_2.md
            git commit -m "ðŸ“¦ Auto-update README_2.md with latest projects"
            git push
          else
            echo "âœ… README_2.md is already up to date. No changes to commit."
          fi
