name: üöÄ Auto-Update README_2.md Monthly

on:
  schedule:
    - cron: "0 0 1 * *"  # Runs on the 1st of every month
  workflow_dispatch:  # Allows manual trigger from GitHub UI

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
      - name: üì• Checkout Repository
        uses: actions/checkout@v3

      - name: üêç Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: üß† Install PyGithub
        run: pip install PyGithub

      - name: üìù Create README_2.md with Project List
        run: |
          echo "from github import Github

USERNAME = 'anilss147'
g = Github()
user = g.get_user(USERNAME)
repos = user.get_repos()

project_lines = []
for i, repo in enumerate(sorted(repos, key=lambda r: r.created_at, reverse=True), start=1):
    line = f'{i}. [{repo.name}]({repo.html_url}) - {repo.description or \"No description.\"}'
    project_lines.append(line)

project_section = '\\n'.join(project_lines[:30])

readme_content = f'''
![Profile Banner](https://raw.githubusercontent.com/anilss147/anilss147/main/github-header-image.png)

# üëã Hi, I'm Anil Sherikar!

üöÄ Passionate Developer | AI Enthusiast | Automation Expert

...

## üöÄ Dynamic Projects

{project_section}

...

üöÄ **Let's build something amazing together!** üí°
'''

with open('README_2.md', 'w', encoding='utf-8') as f:
    f.write(readme_content)
" > update_readme.py

      - name: ‚ñ∂Ô∏è Run Script
        run: python update_readme.py

      - name: ‚úÖ Commit & Push if Changed
        run: |
          git config --global user.name "anilss147"
          git config --global user.email "anil@example.com"

          if [[ `git status --porcelain README_2.md` ]]; then
            git add README_2.md
            git commit -m "üì¶ Auto-update README_2.md"
            git push
          else
            echo "‚úÖ No changes to commit."
